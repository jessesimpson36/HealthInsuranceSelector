{% extends 'base.html' %}

{% block title %} Results {% endblock %}

{% block body %}
<form id="resultForm" action="/results/" method="post">
    <h3 class="text-center">Results</h3>

    <div class="container">
        {% for resultsObj in resultsList %}

            <label> Plan Name:       </label>    {{ resultsObj.plan_name }} <br>
            <label> Issuer Name:     </label>    {{ resultsObj.issuer_name }}   <br>
            <label> Premium Price:   </label>    {{ resultsObj.premium_price }}     <br>
            <label> Maximum Out of Pocket   </label>    {{ resultsObj.moop }}     <br>
            <label> Diseases:   </label>    {{ resultsObj.diseases }}     <br>
            <label> Benefits:   </label>    {{ resultsObj.benefits }}     <br>
            <label> Out of country coverage:   </label>    {{ resultsObj.out_of_country }}     <br>
            <label> Copay:           </label>    {{ resultsObj.copay }}       <br>
            <label> Coinsurance:     </label>    {{ resultsObj.coinsurance }} <br>
            <label> Brochure Link:   </label>   <a href={{ resultsObj.brochure_link }}>{{ resultsObj.brochure_link }}</a><br>
            <label> Enrollment Link: </label>   <a href={{ resultsObj.enrollment_link }}>{{ resultsObj.enrollment_link }}</a> <br>
            <label> BBB Ratings:     </label>    {{ resultsObj.bbb_rating }}<br>
            <label> Customer Ratings:</label>    {{ resultsObj.customer_rating }} / 5 Stars<br><br><br>

            <div id="piechart"></div>
            <script>

                // Load google charts
                google.charts.load('current', {'packages':['corechart']});
                google.charts.setOnLoadCallback(drawChart);

                // Draw the chart and set the chart values
                function drawChart() {
                  var data = google.visualization.arrayToDataTable([
                  ['Type', 'Reviews'],
                  ['Positive Count', {{ resultsObj.pos_count }}],
                  ['Negative Count', {{ resultsObj.neg_count }}],
                  ['Expensive Count', {{ resultsObj.high_count }}],
                  ['Inexpensive Count', {{ resultsObj.low_count }}]
                ]);

                // Optional; add a title and set the width and height of the chart
                var options = {'title':'Reviews', 'width':400, 'height':300};

                // Display the chart inside the <div> element with id="piechart"
                var chart = new google.visualization.PieChart(document.getElementById('piechart'));
                chart.draw(data, options);
                drawChart();
            </script>


        {% endfor %}


    </div>


</form>



{% endblock %}